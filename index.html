<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–†–µ—Ü–µ–ø—Ç–ë–æ—Ç Web App</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    .section { display: none; animation: fade 0.4s ease; }
    .active { display: block !important; }
    @keyframes fade {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .scroll-menu {
      display: flex;
      overflow-x: auto;
      gap: 10px;
      padding: 10px;
      flex-wrap: nowrap;
    }
    .scroll-menu button {
      white-space: nowrap;
      padding: 8px 12px;
      border-radius: 20px;
      border: none;
      background: #fff;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      font-weight: bold;
      cursor: pointer;
    }
    .bottom-nav-wrapper {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #fff;
      border-top: 1px solid #ddd;
    }
    .bottom-nav {
      display: flex;
      justify-content: space-around;
      padding: 10px 0;
    }
  </style>
</head>
<body>
  <div class="app">
    <h1>üçΩ –©–æ –ø—Ä–∏–≥–æ—Ç—É–≤–∞—Ç–∏?</h1>

    <!-- –í–µ—Ä—Ö–Ω—î –º–µ–Ω—é –∫–∞—Ç–µ–≥–æ—Ä—ñ–π -->
    <div class="scroll-menu" id="top-categories"></div>

    <!-- –†–æ–∑–¥—ñ–ª–∏ -->
    <div id="section-home" class="section active">
      <h2>üç≥ –†–µ—Ü–µ–ø—Ç –¥–Ω—è</h2>
      <div id="daily-recipe" class="recipe-card"></div>
    </div>

    <div id="section-recipes" class="section">
      <h2 id="category-title"></h2>
      <div id="recipes"></div>
    </div>

    <div id="section-menu" class="section">
      <h2>üìã –ú–æ—î –º–µ–Ω—é</h2>
      <p>–¢—É—Ç –±—É–¥—É—Ç—å –∑–±–µ—Ä–µ–∂–µ–Ω—ñ —Å—Ç—Ä–∞–≤–∏.</p>
    </div>

    <div id="section-list" class="section">
      <h2>üßæ –°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫</h2>
    </div>

    <div id="section-fridge" class="section">
      <h2>‚ùÑÔ∏è –©–æ —î –≤ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫—É?</h2>
    </div>
  </div>

  <!-- –ù–∏–∂–Ω—î –º–µ–Ω—é -->
  <div class="bottom-nav-wrapper">
    <div class="bottom-nav">
      <button onclick="showSection('section-home')">üçΩ –ì–æ–ª–æ–≤–Ω–∞</button>
      <button onclick="showSection('section-recipes')">üç≤ –†–µ—Ü–µ–ø—Ç–∏</button>
      <button onclick="showSection('section-menu')">üß∫ –ú–µ–Ω—é</button>
      <button onclick="showSection('section-list')">üßæ –°–ø–∏—Å–æ–∫</button>
      <button onclick="showSection('section-fridge')">‚ùÑÔ∏è –•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫</button>
    </div>
  </div>

  <script>
    const categories = [
      "–î–ª—è –¥—ñ—Ç–µ–π", "–í–µ–≥–µ—Ç–∞—Ä—ñ–∞–Ω—Å—å–∫–µ", "–ë–µ–∑ –≥–ª—é—Ç–µ–Ω—É", "–®–≤–∏–¥–∫–æ", "–ü–µ—Ä—à—ñ —Å—Ç—Ä–∞–≤–∏", "–î—Ä—É–≥—ñ —Å—Ç—Ä–∞–≤–∏", "–°–∞–ª–∞—Ç–∏", "–ö–æ–Ω—Å–µ—Ä–≤–∞—Ü—ñ—è —Ç–∞ —Å–æ–ª—ñ–Ω–Ω—è", "–ù–∞–ø–æ—ó", "–î–µ—Å–µ—Ä—Ç–∏", "–í–∏–ø—ñ—á–∫–∞", "–ó–∞–∫—É—Å–∫–∏", "–°–æ—É—Å–∏ —Ç–∞ –∑–∞–ø—Ä–∞–≤–∫–∏"
    ];

    categories.forEach(category => {
      const btn = document.createElement("button");
      btn.textContent = category;
      btn.onclick = () => fetchCategoryRecipes(category);
      document.getElementById("top-categories").appendChild(btn);
    });

    function showSection(id) {
      document.querySelectorAll(".section").forEach(el => el.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }

    async function fetchDailyRecipe() {
      try {
        const res = await fetch("https://recipe-backend-0gz1.onrender.com/recipes");
        const data = await res.json();
        const first = data[0];
        document.getElementById("daily-recipe").innerHTML =
          `<div><strong>${first["–Ω–∞–∑–≤–∞ —Ä–µ—Ü–µ–ø—Ç—É"]}</strong><p>${first["–∫–æ–Ω—Ç–µ–Ω—Ç"]}</p></div>`;
      } catch (err) {
        console.error("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ä–µ—Ü–µ–ø—Ç—É –¥–Ω—è", err);
      }
    }

    async function fetchCategoryRecipes(category) {
      try {
        const res = await fetch(`https://recipe-backend-0gz1.onrender.com/recipes?category=${encodeURIComponent(category)}`);
        const data = await res.json();
        document.getElementById("category-title").textContent = `üçΩ ${category}`;
        const container = document.getElementById("recipes");
        container.innerHTML = "";
        data.forEach(recipe => {
          const div = document.createElement("div");
          div.className = "recipe-card";
          if (recipe["—Ç–∏–ø –±–ª–æ–∫—É"] === "—Ç–µ–∫—Å—Ç") {
            div.innerHTML = `<p>${recipe["–∫–æ–Ω—Ç–µ–Ω—Ç"]}</p>`;
          } else if (recipe["—Ç–∏–ø –±–ª–æ–∫—É"] === "—Ñ–æ—Ç–æ") {
            div.innerHTML = `<img src="${recipe["–∫–æ–Ω—Ç–µ–Ω—Ç"]}" style="max-width: 100%">`;
          }
          container.appendChild(div);
        });
        showSection("section-recipes");
      } catch (err) {
        console.error("–ü–æ–º–∏–ª–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó", err);
      }
    }

    window.onload = fetchDailyRecipe;
  </script>
</body>
</html>
