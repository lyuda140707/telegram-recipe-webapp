<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–†–µ—Ü–µ–ø—Ç–ë–æ—Ç Web App</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Lobster', cursive; margin: 0; background: #fff9f4; }
    .app { padding: 20px; }
    .section { display: none; animation: fade 0.4s ease; }
    .active { display: block !important; }
    @keyframes fade { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .scroll-menu, .bottom-nav { overflow-x: auto; white-space: nowrap; }
    .scroll-menu button, .bottom-nav button { display: inline-block; margin: 5px; padding: 10px; border: none; background: #ffc; border-radius: 12px; cursor: pointer; }
    .recipe-card { background: #fff; padding: 15px; margin: 10px 0; border-radius: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .back-button { margin: 10px 0; padding: 8px 12px; border: none; background: #ffccaa; border-radius: 12px; cursor: pointer; }
  </style>
</head>
<body>
<div class="app">
  <h1>üçΩ –©–æ –ø—Ä–∏–≥–æ—Ç—É–≤–∞—Ç–∏?</h1>

  <div id="recipes"></div>

  <button class="back-button" style="display:none;" onclick="goHome()">‚¨Ö –ù–∞ –≥–æ–ª–æ–≤–Ω—É</button>

  <div class="scroll-menu section active" id="section-categories"></div>

  <div id="section-content" class="section active"></div>
</div>

<div class="bottom-nav-wrapper">
  <div class="bottom-nav" id="bottomNav">
    <button onclick="showSection('profile')">üë§ –ü—Ä–æ—Ñ—ñ–ª—å</button>
    <button onclick="showSection('recipes')">üçΩ –†–µ—Ü–µ–ø—Ç–∏</button>
    <button onclick="showSection('menu')">üß∫ –ú–µ–Ω—é</button>
    <button onclick="showSection('list')">üßæ –°–ø–∏—Å–æ–∫</button>
    <button onclick="showSection('fridge')">‚ùÑÔ∏è –•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫</button>
  </div>
</div>

<script>
let allRecipes = [];

async function fetchAllRecipes() {
  try {
    const res = await fetch('https://recipe-backend-0gz1.onrender.com/recipes');
    const data = await res.json();
    allRecipes = data;
    showRecipeOfDay();
    showCategories();
  } catch (error) {
    console.error("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ä–µ—Ü–µ–ø—Ç—ñ–≤:", error);
  }
}

function showRecipeOfDay() {
  if (!allRecipes.length) return;
  const recipe = allRecipes[0];
  const container = document.getElementById('recipes');
  container.innerHTML = `
    <div class="recipe-card">
      <h2>${recipe["–Ω–∞–∑–≤–∞ —Ä–µ—Ü–µ–ø—Ç—É"]}</h2>
      <p><strong>–ß–∞—Å:</strong> ${recipe["—á–∞—Å –ø—Ä–∏–≥–æ—Ç—É–≤–∞–Ω–Ω—è"] || '–ù–µ–≤—ñ–¥–æ–º–æ'}</p>
      <p><strong>–Ü–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏:</strong> ${recipe["—ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏"] || '–ù–µ–º–∞—î'}</p>
      ${recipe["—Ç–∏–ø –±–ª–æ–∫—É"] === '—Ç–µ–∫—Å—Ç' ? `<p>${recipe["–∫–æ–Ω—Ç–µ–Ω—Ç"]}</p>` : ''}
      ${recipe["—Ç–∏–ø –±–ª–æ–∫—É"] === '—Ñ–æ—Ç–æ' ? `<img src="${recipe["–∫–æ–Ω—Ç–µ–Ω—Ç"]}" style="max-width:100%; border-radius:12px; margin-top:10px;">` : ''}
    </div>
  `;
}

function showCategories() {
  const categories = [
    "–î–ª—è –¥—ñ—Ç–µ–π", "–í–µ–≥–µ—Ç–∞—Ä—ñ–∞–Ω—Å—å–∫–µ", "–ë–µ–∑ –≥–ª—é—Ç–µ–Ω—É", "–®–≤–∏–¥–∫–æ", "–ü–µ—Ä—à—ñ —Å—Ç—Ä–∞–≤–∏",
    "–î—Ä—É–≥—ñ —Å—Ç—Ä–∞–≤–∏", "–°–∞–ª–∞—Ç–∏", "–ö–æ–Ω—Å–µ—Ä–≤–∞—Ü—ñ—è —Ç–∞ —Å–æ–ª—ñ–Ω–Ω—è", "–ù–∞–ø–æ—ó", "–î–µ—Å–µ—Ä—Ç–∏",
    "–í–∏–ø—ñ—á–∫–∞", "–ó–∞–∫—É—Å–∫–∏", "–°–æ—É—Å–∏ —Ç–∞ –∑–∞–ø—Ä–∞–≤–∫–∏"
  ];

  const container = document.getElementById('section-categories');
  container.innerHTML = '';

  categories.forEach(cat => {
    const btn = document.createElement('button');
    btn.textContent = cat;
    btn.onclick = () => filterByCategory(cat);
    container.appendChild(btn);
  });
}

function filterByCategory(category) {
  document.querySelector('.back-button').style.display = 'inline-block';
  const section = document.getElementById('section-content');
  section.innerHTML = '';

  const filtered = allRecipes.filter(r => (r["–∫–∞—Ç–µ–≥–æ—Ä—ñ—è"] || '').toLowerCase() === category.toLowerCase());
  
  if (!filtered.length) {
    section.innerHTML = '<p>–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ —É —Ü—ñ–π –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó.</p>';
    return;
  }

  filtered.forEach(recipe => {
    const card = document.createElement('div');
    card.className = 'recipe-card';

    card.innerHTML = `
      <h2>${recipe["–Ω–∞–∑–≤–∞ —Ä–µ—Ü–µ–ø—Ç—É"]}</h2>
      <p><strong>–ß–∞—Å:</strong> ${recipe["—á–∞—Å –ø—Ä–∏–≥–æ—Ç—É–≤–∞–Ω–Ω—è"] || '–ù–µ–≤—ñ–¥–æ–º–æ'}</p>
      <p><strong>–Ü–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏:</strong> ${recipe["—ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏"] || '–ù–µ–º–∞—î'}</p>
      ${recipe["—Ç–∏–ø –±–ª–æ–∫—É"] === '—Ç–µ–∫—Å—Ç' ? `<p>${recipe["–∫–æ–Ω—Ç–µ–Ω—Ç"]}</p>` : ''}
      ${recipe["—Ç–∏–ø –±–ª–æ–∫—É"] === '—Ñ–æ—Ç–æ' ? `<img src="${recipe["–∫–æ–Ω—Ç–µ–Ω—Ç"]}" style="max-width:100%; border-radius:12px; margin-top:10px;">` : ''}
    `;

    section.appendChild(card);
  });
}

function goHome() {
  document.querySelector('.back-button').style.display = 'none';
  document.getElementById('section-content').innerHTML = '';
  showRecipeOfDay();
}

function showSection(section) {
  alert('–¢—É—Ç –º–∞—î –±—É—Ç–∏ –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ —Ä–æ–∑–¥—ñ–ª: ' + section);
}

window.onload = fetchAllRecipes;
</script>
</body>
</html>
